name: wallet-cli
version: "0.1.0"
author: Shuyu WANG <andelf@gmail.com>
about: Tron Protocol wallet command line util

# FIXME: YAML do not support merge array
common_transaction_args: &common_transaction_args
    - account:
          help: The account address used for signing(look up key from unlocked wallet)
          short: k
          long: account
          takes_value: true
    - private-key:
          help: The private key used for signing
          short: K
          long: private-key
          takes_value: true
          conflicts_with:
              - account
    - skip-sign:
          help: Skip actual sign process
          short: s
          long: skip-sign
          conflicts_with:
              - account
              - private-key
    - dont-broadcast:
          help: Don't broadcast transaction to the network (just print to stdout)
          short: d
          long: dont-broadcast
    - expiration:
          help: Set the time in seconds before a transaction expires, defaults to 60s
          short: x
          long: expiration
          takes_value: true
          default_value: "60"
    - fee-limit:
          help: Maximum value of TRX allowed consumed
          long: fee-limit
          takes_value: true
    - ref-block:
          help: Set the reference block num or block id used for TAPOS (Transaction as Proof-of-Stake)
          short: r
          long: ref-block
          takes_value: true
    - permission-id:
          help: Permission id used by transaction
          long: permission-id
          takes_value: true
          possible_values: ["0", "2", "1"]

args:
    - verbose:
          help: Make the operation more talkative
          short: v
          long: verbose
    - network:
          help: Connect to which Tron network
          long: network
          takes_value: true
          possible_values: [mainnet, shasta, nile, testnet, dappchain, dappchain-testnet]
          default_value: mainnet

subcommands:
    - get:
          about: Retrieves various items and information from the blockchain
          subcommands:
              - node:
                    about: Get current connected node state information
              - block:
                    about: Retrieves a full block from the blockchain
                    args:
                        - BLOCK:
                              help: The number or ID of the block to retrieve
              - transaction:
                    about: Retrieves a transaction from the blockchain
                    args:
                        - ID:
                              help: ID of the transaction to retrieve
                              required: true
              - transaction_info:
                    about: Retrieves receipt of atransaction
                    args:
                        - ID:
                              help: ID of the transaction to retrieve
                              required: true
              - account:
                    about: Retrieves an account from the blockchain
                    args:
                        - NAME:
                              help: The name of the account to retrieve
                              required: true
              - account_permission:
                    about: Retrieves account permision info from the blockchain
                    args:
                        - NAME:
                              help: The name of the account to retrieve
                              required: true
              - account_resource:
                    about: Retrieves energy and bandwidth usage of an account
                    args:
                        - NAME:
                              help: The name of the account to retrieve
                              required: true
              - contract:
                    about: Get details of a smart contract
                    args:
                        - ADDR:
                              help: The address of the smart contract
                              required: true

    - set:
          about: Sets or updates the blockchain state
          subcommands:
              - account_permission:
                    about: Creates or updates an account's permission
                    args:
                        - NAME:
                              help: The name of the account to set permisiion
                              required: true
                        - PERMISSION:
                              help: Permission JSON returned from `get account_permission`, `-` for STDIN
                              required: true
                        - account:
                              help: The account address used for signing(look up key from unlocked wallet)
                              short: k
                              long: account
                              takes_value: true
                        - private-key:
                              help: The private key used for signing
                              short: K
                              long: private-key
                              takes_value: true
                              conflicts_with:
                                  - account
                        - skip-sign:
                              help: Skip actual sign process
                              short: s
                              long: skip-sign
                              conflicts_with:
                                  - account
                                  - private-key
                        - dont-broadcast:
                              help: Don't broadcast transaction to the network (just print to stdout)
                              short: d
                              long: dont-broadcast
                        - expiration:
                              help: Set the time in seconds before a transaction expires, defaults to 60s
                              short: x
                              long: expiration
                              takes_value: true
                              default_value: "60"
                        - fee-limit:
                              help: Maximum value of TRX allowed consumed
                              long: fee-limit
                              takes_value: true
                        - ref-block:
                              help: Set the reference block num or block id used for TAPOS (Transaction as Proof-of-Stake)
                              short: r
                              long: ref-block
                              takes_value: true
                        - permission-id:
                              help: Permission id used by transaction
                              long: permission-id
                              takes_value: true
                              possible_values: ["0", "2", "1"]
              - contract:
                    about: Creates or updates the contract on an account
                    args:
                        - OWNER:
                              help: The owner creating contract
                              required: true
                        - abi:
                              help: File name of raw json of compiler generated ABI code
                              long: abi
                              takes_value: true
                              required: true
                        - code:
                              help: File name or raw hex bytes of compiler generated byte code
                              long: code
                              takes_value: true
                              required: true
                        - name:
                              help: Name of smart contract
                              long: name
                              takes_value: true
                        - user-resource-percent:
                              help: Percentage of user resource consumed, in the range [0, 100]
                              long: user-resource-percent
                              takes_value: true
                              default_value: "100"
                        - libraries:
                              help: |
                                  Direct string or file containing library addresses
                                  Syntax: <libraryName>:<address> [, or whitespace] ...
                              long: libraries
                              takes_value: true
                        - ARGS:
                              help: Contract constructor parameters
                              takes_value: true
                              multiple: true
                              last: true
                        - data:
                              help: raw data to construct contract
                              long: data
                              takes_value: true
                              conflicts_with:
                                  - ARGS

    - list:
          about: Lists any items from blockchain
          subcommands:
              - witness:
                    about: Query the list of Super Representatives
              - node:
                    about: List the nodes which is connecting on the network
              - asset:
                    about: Retrieves list of all tokens
              - proposal:
                    about: Retrives list of all proposals

    - transfer:
          about: Transfer a TRX token
          args:
              - SENDER:
                    help: The account sending tokens
                    required: true
              - RECIPIENT:
                    help: The account receiving tokens
                    required: true
              - AMOUNT:
                    help: The amount of tokens to send and the token symbol
                    required: true
              - MEMO:
                    help: The memo for the transfer
                    required: false
              - account:
                    help: The account address used for signing(look up key from unlocked wallet)
                    short: k
                    long: account
                    takes_value: true
              - private-key:
                    help: The private key used for signing
                    short: K
                    long: private-key
                    takes_value: true
                    conflicts_with:
                        - account
              - skip-sign:
                    help: Skip actual sign process
                    short: s
                    long: skip-sign
                    conflicts_with:
                        - account
                        - private-key
              - dont-broadcast:
                    help: Don't broadcast transaction to the network (just print to stdout)
                    short: d
                    long: dont-broadcast
              - expiration:
                    help: Set the time in seconds before a transaction expires, defaults to 60s
                    short: x
                    long: expiration
                    takes_value: true
                    default_value: "60"
              - fee-limit:
                    help: Maximum value of TRX allowed consumed
                    long: fee-limit
                    takes_value: true
              - ref-block:
                    help: Set the reference block num or block id used for TAPOS (Transaction as Proof-of-Stake)
                    short: r
                    long: ref-block
                    takes_value: true
              - permission-id:
                    help: Permission id used by transaction
                    long: permission-id
                    takes_value: true
                    possible_values: ["0", "2", "1"]

    - freeze:
          about: Freeze balance for bandwidth or energy
          args:
              - FROM:
                    help: The account freezing balance for bandwidth or energy
                    required: true
              - RECEIVER:
                    help: The account to delegate bandwidth or energy from
                    required: true
              - AMOUNT:
                    help: The amount of tokens to send and the token symbol
                    required: true
              - duration:
                    help: Frozen duration, default is 3 (days)
                    long: duration
                    takes_value: true
                    default_value: "3"
                    possible_values: ["3"]
              - bandwidth:
                    help: Frozen balance for bandwidth (default)
                    long: bandwidth
              - energy:
                    help: Frozen balance for energy
                    long: energy
                    conflicts_with:
                        - bandwidth
              - account:
                    help: The account address used for signing(look up key from unlocked wallet)
                    short: k
                    long: account
                    takes_value: true
              - private-key:
                    help: The private key used for signing
                    short: K
                    long: private-key
                    takes_value: true
                    conflicts_with:
                        - account
              - skip-sign:
                    help: Skip actual sign process
                    short: s
                    long: skip-sign
                    conflicts_with:
                        - account
                        - private-key
              - dont-broadcast:
                    help: Don't broadcast transaction to the network (just print to stdout)
                    short: d
                    long: dont-broadcast
              - expiration:
                    help: Set the time in seconds before a transaction expires, defaults to 60s
                    short: x
                    long: expiration
                    takes_value: true
                    default_value: "60"
              - fee-limit:
                    help: Maximum value of TRX allowed consumed
                    long: fee-limit
                    takes_value: true
              - ref-block:
                    help: Set the reference block num or block id used for TAPOS (Transaction as Proof-of-Stake)
                    short: r
                    long: ref-block
                    takes_value: true
              - permission-id:
                    help: Permission id used by transaction
                    long: permission-id
                    takes_value: true
                    possible_values: ["0", "2", "1"]

    - unfreeze:
          about: Unfreeze balance from bandwidth or energy
          args:
              - FROM:
                    help: The account freezing balance for bandwidth or energy
                    required: true
              - RECEIVER:
                    help: The account to undelegate bandwidth or energy from
                    required: true
              - bandwidth:
                    help: Unfreeze balance from bandwidth (default)
                    long: bandwidth
              - energy:
                    help: Unfreeze balance from energy
                    long: energy
                    conflicts_with:
                        - bandwidth
              - account:
                    help: The account address used for signing(look up key from unlocked wallet)
                    short: k
                    long: account
                    takes_value: true
              - private-key:
                    help: The private key used for signing
                    short: K
                    long: private-key
                    takes_value: true
                    conflicts_with:
                        - account
              - skip-sign:
                    help: Skip actual sign process
                    short: s
                    long: skip-sign
                    conflicts_with:
                        - account
                        - private-key
              - dont-broadcast:
                    help: Don't broadcast transaction to the network (just print to stdout)
                    short: d
                    long: dont-broadcast
              - expiration:
                    help: Set the time in seconds before a transaction expires, defaults to 60s
                    short: x
                    long: expiration
                    takes_value: true
                    default_value: "60"
              - fee-limit:
                    help: Maximum value of TRX allowed consumed
                    long: fee-limit
                    takes_value: true
              - ref-block:
                    help: Set the reference block num or block id used for TAPOS (Transaction as Proof-of-Stake)
                    short: r
                    long: ref-block
                    takes_value: true
              - permission-id:
                    help: Permission id used by transaction
                    long: permission-id
                    takes_value: true
                    possible_values: ["0", "2", "1"]

    - call:
          about: Trigger a smart contract call
          args:
              - SENDER:
                    help: The account calling contract
                    required: true
              - CONTRACT:
                    help: Contract address
                    required: true
              - METHOD:
                    help: The called method name, with args
                    required: true
              - ARGS:
                    help: Contract constructor parameters
                    takes_value: true
                    multiple: true
                    last: true
              - data:
                    help: raw data to call contract
                    long: data
                    takes_value: true
                    conflicts_with:
                        - ARGS
              - account:
                    help: The account address used for signing(look up key from unlocked wallet)
                    short: k
                    long: account
                    takes_value: true
              - private-key:
                    help: The private key used for signing
                    short: K
                    long: private-key
                    takes_value: true
                    conflicts_with:
                        - account
              - skip-sign:
                    help: Skip actual sign process
                    short: s
                    long: skip-sign
                    conflicts_with:
                        - account
                        - private-key
              - dont-broadcast:
                    help: Don't broadcast transaction to the network (just print to stdout)
                    short: d
                    long: dont-broadcast
              - expiration:
                    help: Set the time in seconds before a transaction expires, defaults to 60s
                    short: x
                    long: expiration
                    takes_value: true
                    default_value: "60"
              - fee-limit:
                    help: Maximum value of TRX allowed consumed
                    long: fee-limit
                    takes_value: true
              - ref-block:
                    help: Set the reference block num or block id used for TAPOS (Transaction as Proof-of-Stake)
                    short: r
                    long: ref-block
                    takes_value: true
              - permission-id:
                    help: Permission id used by transaction
                    long: permission-id
                    takes_value: true
                    possible_values: ["0", "2", "1"]

    - sign:
          about: Sign and broadcast a transaction
          args:
              - TRANSACTION:
                    help: The JSON string or filename defining the transaction to sign
                    required: true
              - account:
                    help: The account address used for signing(look up key from unlocked wallet)
                    short: k
                    long: account
                    takes_value: true
              - private-key:
                    help: The private key used for signing
                    short: K
                    long: private-key
                    takes_value: true
                    conflicts_with:
                        - account
              - broadcast:
                    help: Broadcast transaction after signing
                    long: broadcast
                    short: b
              - skip-sign:
                    help: Skip actual sign process, may be used with -broadcast
                    short: s
                    long: skip-sign
                    conflicts_with:
                        - account
                        - private-key

    - shielded:
          about: Shielded transaction related commands
          subcommands:
              - create_address:
                    about: Creates a new shielded address
              - debug:
                    about: debug rocks
              - transfer:
                    about: Initiates a shielded transaction, amount can be 'auto'
                    args:
                        - from:
                              help: The address or note for sending TRZ coins
                              short: f
                              long: from
                              multiple: true
                              required: true
                              value_names:
                                  - ADDRESS
                                  - AMOUNT
                        - to:
                              help: The address for receiving TRZ coins
                              short: t
                              long: to
                              multiple: true
                              required: true
                              value_names:
                                  - ADDRESS
                                  - AMOUNT

    - wallet:
          about: Subcommand used to interact with the local wallet
          subcommands:
              - create:
                    about: Creates a new wallet locally
                    args:
                        - name:
                              help: Name of the new wallet
                              short: n
                              long: name
                              takes_value: true
                              default_value: default
                        - password:
                              help: The password of the wallet
                              long: password
                              takes_value: true
              - open:
                    about: Opens an existing wallet
                    args:
                        - name:
                              help: Name of the new wallet
                              short: n
                              long: name
                              takes_value: true
                              default_value: default
              - lock:
                    about: Locks a wallet
              - unlock:
                    about: Unlocks a wallet
                    args:
                        - password:
                              help: The password of the wallet
                              long: password
                              takes_value: true
              - import_key:
                    about: Imports private key into wallet
                    args:
                        - private-key:
                              help: Private key to import
                              long: private-key
                              takes_value: true
                              required: true
              - keys:
                    about: >
                        List of public keys from all unlocked wallets.
                        These are the keys that could be used to sign transactions.
              - create_key:
                    about: |
                        Creates a key pair within the wallet so that you don't need to manually import it.
              - private_keys:
                    about: |
                        Query for the public and private key pairs of an individual wallet.
                        The wallet must already be unlocked and you must give the password again.
                    args:
                        - password:
                              help: The password of the wallet
                              long: password
                              takes_value: true
